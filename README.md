# Virtual-Road
Virtual Road is an indoor cycling simulator that will simulate cycling on a road using real life videos. It requires a bicycle smart trainer or power meter, speed sensor, or for running a run pod. The app will play a video that will simulate cycling or running at the speed you are cycling or running. It will control your bicycle resistance of your trainer, using the BLE FTMS protocol, to simulate riding uphill or downhill. If you only have a power meter you can connect it instead of a trainer and you can connect a run pod for running on a treadmill but you won't feel any resistance changes. It will display current speed, distance, watts and elapsed time as well as averages as it plays the video at the speed that you are riding. The app converts watts to speed based on the road gradient. The app will also connect to a BLE enabled Heart Rate Monitor and display current and average heart rate and a Cadence sensor to disiplay current and average cadence. VRoad has been tested on the Chrome web browser.

In order to use the app you will need both a GPX file and optionally a synchronized Video of the same route. You can create your own or download some from the internet. If you create your own the GPX file needs to begin and end at the same point as the video. If you need to edit the GPX file you can use GPXMagic or GPXStudio. Some routes ready to use can be found at https://cycling.vangestel.online/indoor/videos/. You can also find some videos with GPX files on youtube such as https://www.youtube.com/@IndoorCyclingVideos. There is software such as 4kdownloader which will download the video and then download the corresponding GPX strava file if there is one. You can use only a GPX file and it will still control your trainer bu you will only see the minimap of the route and something like Biketerra would be better suited since it would create an artificial road from the GPX file. You can also use a GPX file with a link to a youtube video. You can find some sameples here  <a href="https://www.dropbox.com/scl/fi/b19oaahj9ay7jucj6nnpn/Youtube.zip?rlkey=p7t94hemokryd972fcu6xyn48&st=d4js69cg&dl=0"">Youtube GPX</a> . The Video ID is in the name field of the GPX file.

To do a ride first select the video you want to use by clicking on the Video button. You can start anywhere on the route by entering the distance in miles in the text area next to the Start button. You must enter the starting location before connecting the trainer. Then select the type of device to connect from the Connect Device drop down list, and then click on it to connect to the device. A smart trainer , heart rate monitor and cadence sensor or run pod can be used. Once your devices are connected begin pedalling and then press the Start button to begin. The video will pause when the speed goes below the Pause speed parameter which defaults to 1 mph. When you are finished press the stop button and then click on Save GPS to save a GPX file to a folder that you select. Also click on Save Data to save the data to a file in a folder that you select. You can upload your ride to STRAVA by sending an email to stravaupload@gotoes.org after setting up your email at https://gotoes.org/strava/index.php. Click on the Email to Strava button on the main page and attach the GPX file from the folder you previously saved it to. You can always upload the file manually using the Strava website.

Workouts can be used if they have the zwo format and extension. It has limited functionality and does not support cadence targets. You can select the workout using the Workout button.Workouts default to ERG mode which can be unselected using the "E" key. ERG mode can also be used without a workout. Use the "E" key and then the up and down arrow keys to change the target watts. For more information view the shortcuts page.

When using Simulation mode (non Workout) you can change Grade effect percent, using the up and down arrow keys. This will reduce steepness of hills if it it less than 100%. Zero will be the same as riding on flat roads. It will not affect your speed which is computed from watts.

There are 21 virtual gears, -10 to +10. The zero virtual gear is the default and is the same as using no virutal gear. The virtual gear can be change by using the - and + keys.

There is an Automatic Shift option if you have a Cadence sensor connected. Once the cadence gets about the maximum threshold, the virtual gear will be increased and once the cadence gets below the minimum threshold the virtual gear is decreased. The maximum and minimum values default to 95 and 85. They can be set in the settings page to different values. Automatic shift is turned on and off via the "A" shortcut key.

If you have a dumb trainer you can still use to app with virtual power. In the Connect Device dropdown select Virtual Power. You can increase and decrease the power with the plus(+) and minuse(-) keys.

You can download a Video and GPX file here. https://www.dropbox.com/scl/fi/4tq48dkth2gzglrgns2me/PineOrchardGolf.zip?rlkey=zckfc6xz3k5zq18216g7yjxyb&st=ggmq0vml&dl=0
