<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Virtual Road</title>

<style>
  body {
    margin: 0;
    background: #0b0f14;
    color: white;
    font-family: "Segoe UI", Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }

  .card {
    background: linear-gradient(180deg,#1a1f27,#0e1218);
    border-radius: 18px;
    padding: 24px;
    box-shadow: 0 0 0 1px #2b3340;
    width: 320px;
    text-align: center;
  }

  h1 {
    margin-top: 0;
    color: #00e5ff;
    font-size: 1.6rem;
  }

  .menu a,
  .menu input {
    display: block;
    margin: 10px 0;
    text-decoration: none;
    background: linear-gradient(180deg,#2a2f3a,#161a22);
    color: white;
    padding: 12px;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: bold;
    box-shadow: inset 0 0 0 1px #3a4252;
    border: none;
    cursor: pointer;
  }

  .menu a:active,
  .menu input:active {
    background: linear-gradient(180deg,#3a4252,#1a1f27);
  }

  .qrbox {
    margin-top: 16px;
  }

  .qrbox img {
    background: white;
    padding: 10px;
    border-radius: 12px;
  }

  .session {
    margin-top: 8px;
    color: #8fa3ff;
    font-size: 0.8rem;
    letter-spacing: 2px;
  }
</style>
</head>

<body>

<div class="card">
  <h1>Virtual Road</h1>

  <div class="menu">
    <!--a id="vroadLink">Virtual Road</a-->
    <a href="cyclecomputer/vroadYoutube.html" id="vroad">Virtual Road</a>
    <a href="cyclecomputer/prefs.html">Settings</a>
    <a href="cyclecomputer/shortcuts.html">Shortcuts</a>
    <a href="cyclecomputer/help.html">Help</a>
    <!--a href="https://www.strava.com/dashboard">Strava</a-->
    <a href="https://www.strava.com/upload/select">Strava Upload</a>
      

  
  </div>

  <div class="qrbox">
    <img id="qr">
    <div class="session" id="sessionText"></div>
  </div>
</div>

<script>
//const sessionId = "ABC123"; // your generated session
//var apikey = Number(localStorage.getItem(".apikey"));
 const apikey = localStorage.getItem('.apikey');
//apikey="xxxxxxxx";
console.log("apikey "+apikey);

//const sessionId = Math.random().toString(36).slice(2);
//const sessionId = Math.random().toString(36).slice(2) + Date.now().toString(36);
    const sessionId = generateSessionId(12);  // e.g. "k7p9m2x4q8r5"
//const url = location.origin + location.pathname + "?session=" + sessionId;

    /*
    let link = document.createElement("a");
link.href = `${location.origin}/cyclecomputer/vroadYoutube.html?session=${sessionId}`;
link.textContent = "Virtual Road";
link.style.display = 'block'; // Make the link a block element
link.style.textAlign = 'center'; // Center the text
*/
 /////// document.getElementById('vroad').href=`${location.origin}/cyclecomputer/vroadYoutube.html?session=${sessionId}`;

//document.body.appendChild(link);
 //   document.body.prepend(link);


const phoneUrl = `${location.origin}/cyclecomputer/phone.html?session=${sessionId}&apikey=${apikey}`;
if (apikey !== undefined && apikey != null) {
document.getElementById("qr").src =
  "https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=" +
  encodeURIComponent(phoneUrl);
  }
    function generateSessionId(length = 12) {
  const chars = 'abcdefghijklmnopqrstuvwxyz0123456789';
  let id = '';
  for (let i = 0; i < length; i++) {
    id += chars.charAt(Math.floor(Math.random() * chars.length));
  }
  return id;
}


</script>
    

       
    </body>